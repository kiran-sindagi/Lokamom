{% load static tailwind_tags %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Mother's Journey</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /*
         * We are defining custom styles here to complement Tailwind CSS.
         * This includes custom fonts, the winding path SVG styles, and animations.
        */
        body {
            background-color: #F8F5F2; /* A soft, warm background color */
            font-family: 'Poppins', sans-serif;
            color: #4A4A4A;
        }

        /* Keyframes for the animated text in the header */
        @keyframes slideInFade {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .letter {
            opacity: 0;
            display: inline-block;
            animation: slideInFade 0.5s ease-out forwards;
        }

        /* Applying custom fonts to headings */
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        /*
         * The main container for our timeline.
         * It's a relative container so we can position the SVG path absolutely within it.
        */
        .timeline-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 1rem;
        }

        /*
         * The SVG path that winds down the page.
         * It's positioned absolutely to overlay the content sections.
         * We hide it on small screens for a cleaner mobile layout.
        */
        .winding-path {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            height: 100%;
            width: 100%;
            z-index: 0;
            display: none; /* Hidden by default, shown on larger screens */
        }

        @media (min-width: 1024px) {
            .winding-path {
                display: block;
            }
        }

        /* Styling for the SVG path itself */
        #journeyPath {
            stroke: #773000; /* A warm brown color for the path */
            stroke-width: 3px;
            stroke-dasharray: 1; /* Initially set to be animated by JS */
            stroke-dashoffset: 1; /* Initially set to be animated by JS */
            fill: none;
        }
        
        /*
         * Styling for each item in the timeline.
         * Uses CSS Grid for a two-column layout on desktop, with a central gutter for the path.
        */
        .timeline-item {
            display: grid;
            grid-template-columns: 1fr; /* Single column on mobile */
            gap: 2rem;
            margin-bottom: 4rem;
            opacity: 0; /* Initially hidden for fade-in animation */
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        /* This class is added by JavaScript when the element is in view */
        .timeline-item.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Desktop layout for timeline items */
        @media (min-width: 1024px) {
            .timeline-item {
                 /* [left-col] [gutter] [right-col] */
                grid-template-columns: 1fr 80px 1fr;
                gap: 3rem;
                align-items: center;
                margin-bottom: 8rem;
            }
        }

        .item-content {
            text-align: center; /* Centered on mobile */
        }

        @media (min-width: 1024px) {
            /* Align content to the correct side on desktop */
            .timeline-item.item-left .item-content {
                grid-column: 1 / 2;
                text-align: right;
            }
            .timeline-item.item-right .item-content {
                grid-column: 3 / 4;
                text-align: left;
            }
        }

        .item-image {
            border-radius: 1.5rem;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @media (min-width: 1024px) {
             /* Place image on the correct side on desktop */
            .timeline-item.item-left .item-image {
                grid-column: 3 / 4;
                grid-row: 1;
            }
            .timeline-item.item-right .item-image {
                grid-column: 1 / 2;
                grid-row: 1;
            }
        }
        
        .item-content h2 {
            color: #2C5282;
            font-weight: bold;
        }

        .item-content p {
            color: #4A4A4A;
        }

    </style>
</head>
<body class="bg-orange-100">

    <!-- Hero Section -->
    <header class="text-center py-16 md:py-24 px-4 bg-white/30 backdrop-blur-lg" style="background-image: url({% static 'fives/aio1.jpg' %}); background-position: center; background-size: cover;">
        <h1 class="text-4xl md:text-6xl font-bold mb-4 text-white">The Journey of a Lifetime</h1>
        <div class="relative text-center w-full max-w-4xl mx-auto">
            <h2 id="animatedText" class="text-white font-semibold text-lg md:text-xl lg:text-2xl px-4">
                <!-- Animated text will be injected here by JavaScript -->
            </h2>
        </div>
    </header>

    <!-- Main Timeline Container -->
    <div class="timeline-container">
        
        <!-- The Winding SVG Path (visual only) -->
        <svg class="winding-path" viewBox="0 0 800 3200" preserveAspectRatio="xMidYMin meet">
            <path id="journeyPath" d="M 400 0 Q 400 150 200 300 T 400 600 Q 400 750 600 900 T 400 1200 Q 400 1350 200 1500 T 400 1800 Q 400 1950 600 2100 T 400 2400 Q 400 2550 200 2700 T 400 3000 V 3200" />
        </svg>

        <!-- Stage 1: Working Woman -->
        <section id="stage1" class="timeline-item item-right">
            <div class="item-content">
                <h2 class="text-2xl lg:text-3xl mb-2">The Professional</h2>
                <p class="text-md lg:text-lg">Balancing career, ambition, and personal life with grace and strength.</p>
            </div>
            <div class="item-image">
                <img src="{% static 'fives/saree_working1.jpg' %}" alt="A professional woman working on a laptop">
            </div>
        </section>

        <!-- Stage 2: 1-2 Months Pregnancy -->
        <section id="stage2" class="timeline-item item-left">
            <div class="item-content">
                <h2 class="text-2xl lg:text-3xl mb-2">A New Beginning</h2>
                <p class="text-md lg:text-lg">The quiet, hopeful start of a new journey. The first few weeks of wonder.</p>
            </div>
            <div class="item-image">
                <img src="{% static 'fives/sora_2.png' %}" alt="A woman in early pregnancy, looking hopeful">
            </div>
        </section>

        <!-- Stage 3: Fully Pregnant -->
        <section id="stage3" class="timeline-item item-right">
            <div class="item-content">
                <h2 class="text-2xl lg:text-3xl mb-2">The Beautiful Bloom</h2>
                <p class="text-md lg:text-lg">Embracing the changes, feeling the connection, and anticipating the arrival.</p>
            </div>
            <div class="item-image">
                <img src="{% static 'fives/sora_3.png' %}" alt="A fully pregnant woman cradling her belly">
            </div>
        </section>

        <!-- Stage 4: Post Delivery -->
        <section id="stage4" class="timeline-item item-left">
            <div class="item-content">
                <h2 class="text-2xl lg:text-3xl mb-2">Hello, World!</h2>
                <p class="text-md lg:text-lg">The world changes in an instant. Navigating the joys and challenges of new motherhood.</p>
            </div>
            <div class="item-image">
                <img src="{% static 'fives/sora_4.png' %}" alt="A new mother holding her baby">
            </div>
        </section>

        <!-- Stage 5: Going Back to Work -->
        <section id="stage5" class="timeline-item item-right">
            <div class="item-content">
                <h2 class="text-2xl lg:text-3xl mb-2">The New Balance</h2>
                <p class="text-md lg:text-lg">Finding a new rhythm, blending the roles of mother and professional with renewed purpose.</p>
            </div>
            <div class="item-image">
                <img src="{% static 'fives/sora_5.png' %}" alt="A mother balancing work and her child">
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const path = document.getElementById('journeyPath');
            const sections = document.querySelectorAll('.timeline-item'); // Changed selector
            const animatedTextContainer = document.getElementById("animatedText");
            const sentence = `As a Mom, at whatever stage you are, you are doing great!`;

            // Function to handle the drawing of the SVG path on scroll
            function animatePathOnScroll() {
                if (!path) return;
                const pathLength = path.getTotalLength();
                path.style.strokeDasharray = pathLength;
                path.style.strokeDashoffset = pathLength;
                window.addEventListener('scroll', () => {
                    const scrollTop = document.documentElement.scrollTop;
                    const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const scrollPercentage = scrollTop / scrollHeight;
                    const drawLength = pathLength * scrollPercentage;
                    path.style.strokeDashoffset = Math.max(0, pathLength - drawLength);
                });
            }

            // Function to handle the fade-in animation of content sections
            function animateSectionsOnScroll() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { rootMargin: '0px', threshold: 0.2 }); // Adjusted threshold
                sections.forEach(section => observer.observe(section));
            }
            
            // Function to animate the header text
            function animateHeaderText() {
                if (!animatedTextContainer) return;
                animatedTextContainer.innerHTML = ''; 
                [...sentence].forEach((char, index) => {
                    const span = document.createElement("span");
                    span.textContent = char === ' ' ? '\u00A0' : char; 
                    span.className = "letter";
                    span.style.animationDelay = `${index * 0.05}s`;
                    animatedTextContainer.appendChild(span);
                });
            }

            // ---- INITIALIZE ALL ANIMATIONS ----
            
            // Initialize path animation only on larger screens
            if (window.innerWidth >= 1024) {
                 animatePathOnScroll();
            }
            
            // Section and text animations run on all screen sizes
            animateSectionsOnScroll();
            animateHeaderText();
        });
    </script>
</body>
</html>
