{% load static tailwind_tags %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Mother's Journey</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* * We are defining custom styles here to complement Tailwind CSS.
         * This includes custom fonts, the winding path SVG styles, and animations.
        */
        body {
            background-color: #F8F5F2; /* A soft, warm background color */
            font-family: 'Poppins', sans-serif;
            color: #4A4A4A;
        }
          @keyframes slideInFade {
            from {
              opacity: 0;
              transform: translateY(10px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .letter {
            opacity: 0;
            display: inline-block; /* Ensures transform works correctly */
            animation: slideInFade 0.5s ease-out forwards;
          }
        /* Applying custom fonts to headings and body text */
        h1, h2, h3 {
            font-family: 'Playfair Display', serif; /* A deep, trustworthy blue */
        }

        /*
         * The main container for our timeline.
         * It's a relative container so we can position the SVG path absolutely within it.
        */
        .timeline-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 1rem;
        }

        /*
         * The SVG path that winds down the page.
         * It's positioned absolutely to overlay the content sections.
         * We hide it on small screens for a cleaner mobile layout.
        */
        .winding-path {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            height: 100%;
            width: 100%;
            z-index: 0;
            display: none; /* Hidden by default, shown on larger screens */
        }

        @media (min-width: 768px) {
            .winding-path {
                display: block;
            }
        }

        /* * Styling for the SVG path itself.
         * 'stroke-dasharray' and 'stroke-dashoffset' are used for the drawing animation.
        */
        #journeyPath {
            stroke: #CBD5E0; /* A light blue-gray color for the path */
            stroke-width: 3px;
            stroke-dasharray: 1; /* Initially set to be animated by JS */
            stroke-dashoffset: 1; /* Initially set to be animated by JS */
            fill: none;
        }

        /* * Styling for each section/card in the timeline.
         * Each card has a background image, rounded corners, and a shadow.
         * We use a 'before' pseudo-element to create a semi-transparent overlay,
         * which makes the text more readable.
        */
        .timeline-section {
            position: relative;
            background-size: cover;
            background-position: center;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 8rem 2rem 2rem;
            margin-bottom: 4rem;
            z-index: 1;
            opacity: 0; /* Initially hidden for fade-in animation */
            transform: translateY(20px); /* Initially moved down for slide-in animation */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        /* This class is added by JavaScript when the element is in view */
        .timeline-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 60%);
            z-index: 1;
        }

        .timeline-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        /* Specific alignment for sections on larger screens */
        @media (min-width: 768px) {
            .timeline-section {
                width: 45%;
                padding: 10rem 2.5rem 2.5rem;
                margin-bottom: 8rem;
            }
            /* Align sections to the left or right of the timeline */
            .timeline-left {
                margin-left: 0;
                margin-right: auto;
            }
            .timeline-right {
                margin-left: auto;
                margin-right: 0;
            }
        }
    </style>
</head>
<body class="bg-orange-100">

    <!-- Hero Section -->
    <header class="text-center py-16 md:py-24 px-4 bg-white" style="background-image: url({% static 'fives/aio1.jpg' %})">
        <h1 class="text-4xl md:text-6xl font-bold mb-4 text-blue-50">The Journey of a Lifetime</h1>
        <center>
          <div class="relative text-center w-full max-w-4xl">
            <h1 id="animatedText" class="text-white font-bold text-lg md:text-lg lg:text-lg px-4">
              <!-- Animated text will be injected here by JavaScript -->
            </h1>
          </div>
        </center>
    </header>

    <!-- Main Timeline Container -->
    <div class="timeline-container ">
        
        <!-- The Winding SVG Path -->
        <!-- This path is defined with bezier curves to create the S-shape. Its appearance is animated on scroll. -->
        <svg class="winding-path" viewBox="0 0 800 3200" preserveAspectRatio="xMidYMin meet">
            <path id="journeyPath" d="M 400 0 Q 400 150 200 300 T 400 600 Q 400 750 600 900 T 400 1200 Q 400 1350 200 1500 T 400 1800 Q 400 1950 600 2100 T 400 2400 Q 400 2550 200 2700 T 400 3000 V 3200" />
        </svg>

        <!-- Stage 1: Working Woman -->
        <!-- NOTE: Replace placehold.co URLs with your static image p" -->
        <section id="stage1" class="timeline-section timeline-left h-full" style="background-image: url({% static 'fives/saree_working1.jpg' %})">
            <div class="timeline-content h-full">
                <h2 class="text-3xl lg:text-4xl font-bold text-white mb-2">The Professional</h2>
                <p class="text-md lg:text-lg text-gray-200">Balancing career, ambition, and personal life with grace and strength.</p>
            </div>
        </section>

        <!-- Stage 2: 1-2 Months Pregnancy -->
        <section id="stage2" class="timeline-section timeline-right" style="background-image: url({% static 'fives/sora_2.png' %});">
            <div class="timeline-content">
                <h2 class="text-3xl lg:text-4xl font-bold text-white mb-2">A New Beginning</h2>
                <p class="text-md lg:text-lg text-gray-200">The quiet, hopeful start of a new journey. The first few weeks of wonder.</p>
            </div>
        </section>

        <!-- Stage 3: Fully Pregnant -->
        <section id="stage3" class="timeline-section timeline-left" style="background-image: url({% static 'fives/sora_3.png' %});">
            <div class="timeline-content">
                <h2 class="text-3xl lg:text-4xl font-bold text-white mb-2">The Beautiful Bloom</h2>
                <p class="text-md lg:text-lg text-gray-200">Embracing the changes, feeling the connection, and anticipating the arrival.</p>
            </div>
        </section>

        <!-- Stage 4: Post Delivery -->
        <section id="stage4" class="timeline-section timeline-right" style="background-image: url({% static 'fives/sora_4.png' %});">
            <div class="timeline-content">
                <h2 class="text-3xl lg:text-4xl font-bold text-white mb-2">Hello, World!</h2>
                <p class="text-md lg:text-lg text-gray-200">The world changes in an instant. Navigating the joys and challenges of new motherhood.</p>
            </div>
        </section>

        <!-- Stage 5: Going Back to Work -->
        <section id="stage5" class="timeline-section timeline-left" style="background-image: url({% static 'fives/sora_5.png' %});">
            <div class="timeline-content">
                <h2 class="text-3xl lg:text-4xl font-bold text-white mb-2">The New Balance</h2>
                <p class="text-md lg:text-lg text-gray-200">Finding a new rhythm, blending the roles of mother and professional with renewed purpose.</p>
            </div>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const path = document.getElementById('journeyPath');
            const sections = document.querySelectorAll('.timeline-section');

            // Function to handle the drawing of the SVG path on scroll
            function animatePathOnScroll() {
                if (!path) return;

                // 1. Get path length
                const pathLength = path.getTotalLength();

                // 2. Set up stroke-dasharray and stroke-dashoffset
                // This makes the path "invisible" initially by creating a dash equal to the path's length
                // and an offset also equal to the path's length.
                path.style.strokeDasharray = pathLength;
                path.style.strokeDashoffset = pathLength;

                // 3. Listen for scroll events
                window.addEventListener('scroll', () => {
                    // 4. Calculate scroll progress
                    const scrollTop = document.documentElement.scrollTop;
                    const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const scrollPercentage = scrollTop / scrollHeight;

                    // 5. Update stroke-dashoffset
                    // As we scroll, we decrease the offset, which "draws" the line.
                    const drawLength = pathLength * scrollPercentage ; // Multiplier to finish drawing a bit early
                    path.style.strokeDashoffset = Math.max(0, pathLength - drawLength);
                });
            }

            // Function to handle the fade-in animation of content sections
            function animateSectionsOnScroll() {
                // Use Intersection Observer for better performance than scroll events
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        // If the section is intersecting with the viewport
                        if (entry.isIntersecting) {
                            // Add the 'is-visible' class to trigger the CSS transition
                            entry.target.classList.add('is-visible');
                            // We can unobserve it after it becomes visible to save resources
                            observer.unobserve(entry.target);
                        }
                    });
                }, {
                    rootMargin: '0px',
                    threshold: 0.3 // Trigger when 10% of the element is visible
                });

                // Observe each section
                sections.forEach(section => {
                    observer.observe(section);
                });
            }
            
            // Initialize animations if the screen is not mobile
            if (window.innerWidth >= 768) {
                 animatePathOnScroll();
            }
            
            // Section animations run on all screen sizes
            animateSectionsOnScroll();
        });

          window.addEventListener("DOMContentLoaded", () => {
    const sentence = `As a Mom, at whatever stage you are, you are doing great!`;
    const container = document.getElementById("animatedText");

    // Clear any existing content to prevent duplication on page reloads (e.g., with Turbo)
    container.innerHTML = ''; 

    // Split the sentence into characters and create a styled <span> for each.
    // The animation delay creates a staggered, letter-by-letter appearance.
    [...sentence].forEach((char, index) => {
      const span = document.createElement("span");
      
      // Use non-breaking space for actual spaces to ensure they are animated.
      span.textContent = char === ' ' ? '\u00A0' : char; 
      
      span.className = "letter";
      span.style.animationDelay = `${index * 0.05}s`; // Slightly slower for a more graceful effect
      container.appendChild(span);
    });
  });
    </script>
</body>
</html>
