{% extends 'layout.html' %}
{% block content %}
<div class="max-w-4xl mx-auto mt-6 px-4 space-y-6">

  <!-- Post -->
  <div class="bg-white/90 border border-teal-200 rounded-xl shadow-md p-6 backdrop-blur-sm">
    <div class="flex items-center justify-between mb-3">
      <span class="px-3 py-1 bg-teal-100 text-[#0f766e] rounded-full font-semibold">
        {{ post.owner }}
      </span>
      <span class="text-xs text-gray-500">{{ post.time }} | {{ post.date }}</span>
    </div>
    <h1 class="text-2xl font-bold text-[#0f766e] mb-4 break-words">{{ post.body }}</h1>
  </div>

  <!-- Reply Form -->
  <div class="bg-white/90 border border-teal-200 rounded-xl shadow p-5 backdrop-blur-sm">
    <form method="POST" id="replyform">
      {% csrf_token %}
      <label for="reply" class="block text-[#0f766e] font-semibold mb-2">Add a Reply</label>
      <textarea
        name="reply"
        id="reply"
        placeholder="Write your reply..."
        class="w-full resize-y rounded-lg border border-teal-200 bg-teal-50 text-gray-800 p-3 focus:ring-2 focus:ring-[#0f766e] focus:outline-none transition"
      ></textarea>
      <div class="flex justify-between items-center mt-3">
        <button
          class="px-5 py-2 font-bold rounded-lg bg-gradient-to-tr from-[#0f766e] to-teal-500 hover:from-[#115e57] hover:to-teal-600 text-white shadow transition transform hover:scale-105"
        >
          Send
        </button>
        <a href="{% url 'forums' %}" class="text-[#0f766e] hover:underline font-semibold">
          ← Back
        </a>
      </div>
    </form>
  </div>

  <!-- Replies Section -->
  <div class="bg-white/90 border border-teal-200 rounded-xl shadow p-5 backdrop-blur-sm">
    <h2 class="text-lg font-bold text-[#0f766e] mb-4">Replies</h2>

    {% if page_obj.object_list %}
      {% for reply in page_obj.object_list %}
        <div class="border-l-4 border-teal-300 pl-4 mb-4">
          <div class="flex items-center gap-2 mb-1">
            <span class="font-bold text-[#0f766e]">{{ reply.owner }}</span>
            <span class="text-xs text-gray-500">{{ reply.time }} | {{ reply.date }}</span>
          </div>
          <p class="text-gray-800 break-words">{{ reply }}</p>
        </div>
      {% endfor %}

      <!-- Pagination -->
      {% if page_obj.paginator.num_pages > 1 %}
      <div class="flex justify-center items-center gap-4 mt-6 text-sm">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}"
             class="px-3 py-1 rounded bg-teal-100 hover:bg-teal-200 text-[#0f766e] transition">
            ← Previous
          </a>
        {% endif %}
        <span class="font-medium">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}"
             class="px-3 py-1 rounded bg-teal-100 hover:bg-teal-200 text-[#0f766e] transition">
            Next →
          </a>
        {% endif %}
      </div>
      {% endif %}

    {% else %}
      <p class="text-gray-500 italic text-center">Be the first one to reply!</p>
    {% endif %}
  </div>
</div>

<script>
  document.cookie =
    "user_timezone=" +
    Intl.DateTimeFormat().resolvedOptions().timeZone +
    ";path=/";
</script>
{% endblock %}
